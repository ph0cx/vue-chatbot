(function(t,e){"object"===typeof exports&&"object"===typeof module?module.exports=e(require("vue")):"function"===typeof define&&define.amd?define([],e):"object"===typeof exports?exports["vue-bot-ui"]=e(require("vue")):t["vue-bot-ui"]=e(t["Vue"])})("undefined"!==typeof self?self:this,(function(t){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s="fb15")}({"24fb":function(t,e,n){"use strict";function r(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"===typeof btoa){var i=o(r),a=r.sources.map((function(t){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(t," */")}));return[n].concat(a).concat([i]).join("\n")}return[n].join("\n")}function o(t){var e=btoa(unescape(encodeURIComponent(JSON.stringify(t)))),n="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(e);return"/*# ".concat(n," */")}t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=r(e,t);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,r){"string"===typeof t&&(t=[[null,t,""]]);var o={};if(r)for(var i=0;i<this.length;i++){var a=this[i][0];null!=a&&(o[a]=!0)}for(var s=0;s<t.length;s++){var c=[].concat(t[s]);r&&o[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),e.push(c))}},e}},"499e":function(t,e,n){"use strict";function r(t,e){for(var n=[],r={},o=0;o<e.length;o++){var i=e[o],a=i[0],s=i[1],c=i[2],l=i[3],u={id:t+":"+o,css:s,media:c,sourceMap:l};r[a]?r[a].parts.push(u):n.push(r[a]={id:a,parts:[u]})}return n}n.r(e),n.d(e,"default",(function(){return f}));var o="undefined"!==typeof document;if("undefined"!==typeof DEBUG&&DEBUG&&!o)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var i={},a=o&&(document.head||document.getElementsByTagName("head")[0]),s=null,c=0,l=!1,u=function(){},b=null,p="data-vue-ssr-id",d="undefined"!==typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function f(t,e,n,o){l=n,b=o||{};var a=r(t,e);return h(a),function(e){for(var n=[],o=0;o<a.length;o++){var s=a[o],c=i[s.id];c.refs--,n.push(c)}e?(a=r(t,e),h(a)):a=[];for(o=0;o<n.length;o++){c=n[o];if(0===c.refs){for(var l=0;l<c.parts.length;l++)c.parts[l]();delete i[c.id]}}}}function h(t){for(var e=0;e<t.length;e++){var n=t[e],r=i[n.id];if(r){r.refs++;for(var o=0;o<r.parts.length;o++)r.parts[o](n.parts[o]);for(;o<n.parts.length;o++)r.parts.push(g(n.parts[o]));r.parts.length>n.parts.length&&(r.parts.length=n.parts.length)}else{var a=[];for(o=0;o<n.parts.length;o++)a.push(g(n.parts[o]));i[n.id]={id:n.id,refs:1,parts:a}}}}function m(){var t=document.createElement("style");return t.type="text/css",a.appendChild(t),t}function g(t){var e,n,r=document.querySelector("style["+p+'~="'+t.id+'"]');if(r){if(l)return u;r.parentNode.removeChild(r)}if(d){var o=c++;r=s||(s=m()),e=v.bind(null,r,o,!1),n=v.bind(null,r,o,!0)}else r=m(),e=k.bind(null,r),n=function(){r.parentNode.removeChild(r)};return e(t),function(r){if(r){if(r.css===t.css&&r.media===t.media&&r.sourceMap===t.sourceMap)return;e(t=r)}else n()}}var y=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}();function v(t,e,n,r){var o=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=y(e,o);else{var i=document.createTextNode(o),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(i,a[e]):t.appendChild(i)}}function k(t,e){var n=e.css,r=e.media,o=e.sourceMap;if(r&&t.setAttribute("media",r),b.ssrId&&t.setAttribute(p,e.id),o&&(n+="\n/*# sourceURL="+o.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),t.styleSheet)t.styleSheet.cssText=n;else{while(t.firstChild)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}},"59d2":function(t,e,n){var r=n("24fb");e=r(!1),e.push([t.i,'.qkb-bot-ui{position:fixed;z-index:1000;bottom:1.5rem;right:1.5rem;display:flex;flex-direction:column;font-size:1rem}.qkb-bot-ui *{box-sizing:border-box}.qkb-preload-image{position:absolute;top:0;left:0;width:0;height:0;overflow:hidden}.qkb-bot-ui--animate .qkb-fadeUp-enter-active,.qkb-bot-ui--animate .qkb-fadeUp-leave-active{opacity:1;transform:translate(0);transition:opacity .15s linear,transform .2s ease-out}.qkb-bot-ui--animate .qkb-fadeUp-enter,.qkb-bot-ui--animate .qkb-fadeUp-leave-to{transform:translateY(20px);opacity:0}.qkb-bot-ui--animate .qkb-scaleUp-enter-active,.qkb-bot-ui--animate .qkb-scaleUp-leave-active{opacity:1;transform:scale(1);transition:opacity .1s linear,transform .2s ease-out}.qkb-bot-ui--animate .qkb-scaleUp-enter,.qkb-bot-ui--animate .qkb-scaleUp-leave-to{transform:scale(0);opacity:0}@-webkit-keyframes qkbJump{0%{transform:translateY(2px)}to{transform:translateY(-1px)}}@keyframes qkbJump{0%{transform:translateY(2px)}to{transform:translateY(-1px)}}.qkb-msg-bubble__typing-indicator:after,.qkb-msg-bubble__typing-indicator:before,.qkb-msg-bubble__typing-indicator span{transform:translateY(2px);-webkit-animation:qkbJump .35s ease infinite alternate;animation:qkbJump .35s ease infinite alternate}.qkb-msg-bubble__typing-indicator span{-webkit-animation-delay:.175s;animation-delay:.175s}.qkb-msg-bubble__typing-indicator:after{-webkit-animation-delay:.35s;animation-delay:.35s}.qkb-bot-bubble{align-self:flex-end}.qkb-bubble-btn{display:block;padding:0;outline:0;border:0;box-shadow:none;border-radius:50%;color:#fff;fill:#fff;cursor:pointer;box-shadow:0 3px 5px 0 rgba(0,0,0,.15);transition:opacity .2s linear}.qkb-bubble-btn:hover{opacity:.85}.qkb-bubble-btn-icon{display:block;position:absolute;top:50%;left:50%;width:27px;height:auto;margin:-11px 0 0 -13px;line-height:1em}.qkb-bubble-btn-icon.qkb-bubble-btn-icon--close{width:15px;margin:-7px 0 0 -7px}.qkb-board{display:flex;flex-direction:column;position:absolute;right:0;overflow:hidden;width:376px;height:80vh;margin-bottom:10px;border-radius:8px;background-color:#fff;box-shadow:0 3px 30px 0 rgba(0,0,0,.15)}.qkb-board-header{display:flex;flex:none;align-items:center;justify-content:space-between;height:50px;padding:5px 15px}.qkb-board-header__title{font-weight:700;font-size:.875rem}.qkb-board-content{flex-grow:1;overflow:hidden scroll}.qkb-board-content__bubbles{min-height:100%;padding:1.5rem 1.25rem 1rem}.qkb-msg-bubble{display:flex;position:relative}.qkb-msg-avatar{flex-grow:1;flex:none;position:relative;overflow:hidden;border-radius:50%}.qkb-msg-avatar__img{position:absolute;top:0;left:0;width:100%;height:100%;background-color:transparent;background-size:cover;background-repeat:no-repeat}.qkb-msg-bubble__time{display:none;position:absolute;right:0;top:0;padding:2px 5px;margin-top:-5px;border-radius:5px;font-size:.625rem;color:#fff;background-color:#222;transform:translateY(-100%);opacity:0;transition:opacity .1s linear 1s}.qkb-msg-bubble--user .qkb-msg-bubble__time{display:block}.qkb-msg-bubble-component{font-size:.875rem}.qkb-msg-bubble-component:hover~.qkb-msg-bubble__time{opacity:.8}.qkb-msg-bubble{padding-bottom:1rem}.qkb-msg-bubble.qkb-msg-bubble--bot .qkb-msg-bubble-component{margin-right:2.5rem;margin-left:.5rem}.qkb-msg-bubble.qkb-msg-bubble--user{justify-content:flex-end}.qkb-msg-bubble.qkb-msg-bubble--user .qkb-msg-bubble-component{margin-left:5rem}.qkb-msg-bubble-component__text{position:relative;padding:.75rem 1rem;border-radius:6px}.qkb-msg-bubble-component__options-wrapper{display:flex;flex-wrap:wrap}.qkb-mb-button-options__item{flex:0 0 auto}.qkb-mb-button-options__btn{display:block;overflow:hidden;position:relative;margin:.5rem .375rem 0 0;padding:.25rem 1rem;cursor:pointer;outline:0;border:1px solid transparent;border-radius:13px;color:inherit;font-size:.875rem;font-family:inherit;text-decoration:none;background-color:transparent;transition:background-color .15s linear,color .1s linear}.qkb-mb-button-options__btn span{position:relative;z-index:10}.qkb-msg-bubble__typing-indicator{position:relative;min-width:29px;opacity:.3}.qkb-msg-bubble__typing-indicator span{display:block;width:7px;height:7px;margin:0 auto;border-radius:50%}.qkb-msg-bubble__typing-indicator:after,.qkb-msg-bubble__typing-indicator:before{content:"";display:block;position:absolute;top:0;width:7px;height:7px;border-radius:50%}.qkb-msg-bubble__typing-indicator:before{left:0}.qkb-msg-bubble__typing-indicator:after{right:0}.qkb-board-action{position:relative;display:flex;flex:none;height:46px;padding:.45rem 1.25rem .5rem;border-top:1px solid #e6e6e6}.qkb-board-action--disabled:before{content:"";display:block;position:absolute;z-index:10;top:0;left:0;width:100%;height:100%;opacity:.2;cursor:not-allowed}.qkb-board-action__wrapper{display:flex;width:100%;background-color:#fff}.qkb-board-action__msg-box{position:relative;flex-grow:1;padding:0 1rem 0 0}.qkb-board-action__input{height:100%;width:100%;padding:0;font-size:.875rem;border:0;background-color:transparent;box-shadow:none;outline:0}.qkb-board-action__input[disabled=disabled]{pointer-events:none}.qkb-board-action__disable-text{display:flex;align-items:center;position:absolute;top:0;left:0;height:100%;width:100%;background-color:#fff;font-size:.875rem}.qkb-board-action__extra{display:flex;flex:none;justify-content:center}.qkb-action-item{display:block;padding:0;outline:0;border:0;line-height:1;box-shadow:none;background-color:transparent;cursor:pointer;opacity:.6;transition:opacity .1s linear}.qkb-action-item:hover{opacity:1}.qkb-action-icon{width:16px;height:16px;line-height:1;fill:#666;color:#666;vertical-align:middle;margin:5px}.qkb-board-aciton--typing .qkb-action-item--send{opacity:1}',""]),t.exports=e},"62e4":function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},"8bbf":function(e,n){e.exports=t},"98b8":function(t,e,n){(function(t){function e(t){return e="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}var n=function(t){"use strict";var n,r=Object.prototype,o=r.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(t,e,n,r){var o=e&&e.prototype instanceof m?e:m,i=Object.create(o.prototype),a=new S(r||[]);return i._invoke=q(t,n,a),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(r){return{type:"throw",arg:r}}}t.wrap=l;var b="suspendedStart",p="suspendedYield",d="executing",f="completed",h={};function m(){}function g(){}function y(){}var v={};v[a]=function(){return this};var k=Object.getPrototypeOf,w=k&&k(k(E([])));w&&w!==r&&o.call(w,a)&&(v=w);var x=y.prototype=m.prototype=Object.create(v);function _(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function O(t,n){function r(i,a,s,c){var l=u(t[i],t,a);if("throw"!==l.type){var b=l.arg,p=b.value;return p&&"object"===e(p)&&o.call(p,"__await")?n.resolve(p.__await).then((function(t){r("next",t,s,c)}),(function(t){r("throw",t,s,c)})):n.resolve(p).then((function(t){b.value=t,s(b)}),(function(t){return r("throw",t,s,c)}))}c(l.arg)}var i;function a(t,e){function o(){return new n((function(n,o){r(t,e,n,o)}))}return i=i?i.then(o,o):o()}this._invoke=a}function q(t,e,n){var r=b;return function(o,i){if(r===d)throw new Error("Generator is already running");if(r===f){if("throw"===o)throw i;return T()}n.method=o,n.arg=i;while(1){var a=n.delegate;if(a){var s=j(a,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===b)throw r=f,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var c=u(t,e,n);if("normal"===c.type){if(r=n.done?f:p,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=f,n.method="throw",n.arg=c.arg)}}}function j(t,e){var r=t.iterator[e.method];if(r===n){if(e.delegate=null,"throw"===e.method){if(t.iterator["return"]&&(e.method="return",e.arg=n,j(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var o=u(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function E(t){if(t){var e=t[a];if(e)return e.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){while(++r<t.length)if(o.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=n,e.done=!0,e};return i.next=i}}return{next:T}}function T(){return{value:n,done:!0}}return g.prototype=x.constructor=y,y.constructor=g,y[c]=g.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,c in t||(t[c]="GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},_(O.prototype),O.prototype[s]=function(){return this},t.AsyncIterator=O,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new O(l(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},_(x),x[c]="Generator",x[a]=function(){return this},x.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){while(e.length){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=E,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,o){return s.type="throw",s.arg=t,e.next=r,o&&(e.method="next",e.arg=n),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=o.call(a,"catchLoc"),l=o.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),C(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;C(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=n),h}},t}("object"===e(t)?t.exports:{});try{regeneratorRuntime=n}catch(r){Function("r","regeneratorRuntime = r")(n)}}).call(this,n("62e4")(t))},a34a:function(t,e,n){t.exports=n("98b8")},b4c3:function(t,e,n){var r=n("59d2");"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var o=n("499e").default;o("7d102d35",r,!0,{sourceMap:!1,shadowMode:!1})},de67:function(t,e,n){"use strict";var r=n("b4c3"),o=n.n(r);o.a},f6fd:function(t,e){(function(t){var e="currentScript",n=t.getElementsByTagName("script");e in t||Object.defineProperty(t,e,{get:function(){try{throw new Error}catch(r){var t,e=(/.*at [^\(]*\((.*):.+:.+\)$/gi.exec(r.stack)||[!1])[1];for(t in n)if(n[t].src==e||"interactive"==n[t].readyState)return n[t];return null}}})})(document)},fb15:function(t,e,n){"use strict";var r;(n.r(e),n.d(e,"VueBotUI",(function(){return le})),"undefined"!==typeof window)&&(n("f6fd"),(r=window.document.currentScript)&&(r=r.src.match(/(.+\/)[^/]+\.js(\?.*)?$/))&&(n.p=r[1]));var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"qkb-bot-ui",class:t.uiClasses},[n("transition",{attrs:{name:"qkb-fadeUp"}},[t.botActive?n("div",{staticClass:"qkb-board"},[n("BoardHeader",{attrs:{"bot-title":t.optionsMain.botTitle},on:{"close-bot":t.botToggle},scopedSlots:t._u([{key:"header",fn:function(){return[t._t("header")]},proxy:!0}],null,!0)}),n("BoardContent",{attrs:{"bot-typing":t.botTyping,"main-data":t.messages},scopedSlots:t._u([{key:"botTyping",fn:function(){return[t._t("botTyping")]},proxy:!0}],null,!0)}),n("BoardAction",{ref:"boardAction",attrs:{"input-disable":t.inputDisable,"input-placeholder":t.optionsMain.inputPlaceholder,"input-disable-placeholder":t.optionsMain.inputDisablePlaceholder,"show-mic-button":t.optionsMain.showMicButton},on:{"msg-send":t.sendMessage,"mic-state":t.handleMicState},scopedSlots:t._u([{key:"actions",fn:function(){return[t._t("actions")]},proxy:!0},{key:"sendButton",fn:function(){return[t._t("sendButton")]},proxy:!0}],null,!0)})],1):t._e()]),n("div",{staticClass:"qkb-bot-bubble"},[n("button",{staticClass:"qkb-bubble-btn",on:{click:t.botToggle}},[t._t("bubbleButton",[n("transition",{attrs:{name:"qkb-scaleUp"}},[t.botActive?n("CloseIcon",{key:"2",staticClass:"qkb-bubble-btn-icon qkb-bubble-btn-icon--close"}):n("BubbleIcon",{key:"1",staticClass:"qkb-bubble-btn-icon"})],1)])],2)]),n("AppStyle",{attrs:{options:t.optionsMain}}),n("div",{staticClass:"qkb-preload-image"},[t.optionsMain.botAvatarImg?n("div",{staticClass:"qkb-msg-avatar__img"}):t._e()])],1)},i=[],a=n("a34a"),s=n.n(a),c=n("8bbf"),l=n.n(c),u=new l.a,b=u,p={EVENT_OPEN:"botui-open",EVENT_CLOSE:"botui-close",EVENT_TOGGLE:"botui-toggle"},d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"qkb-board-header"},[t._t("header",[n("div",{staticClass:"qkb-board-header__title"},[t._v(t._s(t.botTitle))])])],2)},f=[],h={props:{botTitle:{type:String,default:"Chatbot"}}},m=h;function g(t,e,n,r,o,i,a,s){var c,l="function"===typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=n,l._compiled=!0),r&&(l.functional=!0),i&&(l._scopeId="data-v-"+i),a?(c=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},l._ssrRegister=c):o&&(c=s?function(){o.call(this,this.$root.$options.shadowRoot)}:o),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(t,e){return c.call(e),u(t,e)}}else{var b=l.beforeCreate;l.beforeCreate=b?[].concat(b,c):[c]}return{exports:t,options:l}}var y=g(m,d,f,!1,null,null,null),v=y.exports,k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"boardContent",staticClass:"qkb-board-content"},[n("div",{ref:"boardBubbles",staticClass:"qkb-board-content__bubbles"},[t._l(t.mainData,(function(t,e){return n("message-bubble",{key:e,attrs:{message:t}})})),t.botTyping?n("div",{staticClass:"qkb-board-content__bot-typing"},[t._t("botTyping",[n("message-typing")])],2):t._e()],2)])},w=[],x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"qkb-msg-bubble",class:t.bubbleClass},["bot"===t.message.agent?n("div",{staticClass:"qkb-msg-avatar"},[n("div",{staticClass:"qkb-msg-avatar__img"})]):t._e(),t.componentType?n(t.componentType,{tag:"component",attrs:{"main-data":t.message}}):t._e(),t.message.createdAt?n("div",{staticClass:"qkb-msg-bubble__time"},[t._v(t._s(t.message.createdAt))]):t._e()],1)},_=[],O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"qkb-msg-bubble-component qkb-msg-bubble-component--single-text"},[n("div",{staticClass:"qkb-msg-bubble-component__text"},[t._v(t._s(t.mainData.text)),"bot"===t.mainData.agent?n("button",{staticClass:"qkb-msg-bubble-play-btn",staticStyle:{"margin-left":"8px",background:"none",border:"none",cursor:"pointer"},attrs:{disabled:t.isPlaying},on:{click:t.playAudio}},[t.isPlaying?n("span",[t._v("⏸️")]):n("span",[t._v("▶️")])]):t._e()])])},q=[];function j(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(l){return void n(l)}s.done?e(c):Promise.resolve(c).then(r,o)}function P(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){j(i,r,o,a,s,"next",t)}function s(t){j(i,r,o,a,s,"throw",t)}a(void 0)}))}}var C={props:{mainData:{type:Object}},data:function(){return{isPlaying:!1,audio:null}},methods:{playAudio:function(){var t=this;return P(s.a.mark((function e(){var n,r,o,i;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.mainData.text,window._audioCache||(window._audioCache={}),!t.isPlaying){e.next=6;break}return t.audio&&t.audio.pause(),t.isPlaying=!1,e.abrupt("return");case 6:if(t.isPlaying=!0,e.prev=7,!window._audioCache[n]){e.next=12;break}r=window._audioCache[n],e.next=21;break;case 12:return e.next=14,fetch("https://api-aitext2speech.hayokmedicare.ng/api/text-to-speech/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:t.mainData.text})});case 14:if(o=e.sent,o.ok){e.next=17;break}throw new Error("TTS failed");case 17:return e.next=19,o.blob();case 19:r=e.sent,window._audioCache[n]=r;case 21:i=URL.createObjectURL(r),t.audio=new Audio(i),t.audio.onended=function(){t.isPlaying=!1,URL.revokeObjectURL(i)},t.audio.onerror=function(){t.isPlaying=!1,URL.revokeObjectURL(i)},t.audio.play(),e.next=32;break;case 28:e.prev=28,e.t0=e["catch"](7),t.isPlaying=!1,console.error("Text-to-speech failed",e.t0);case 32:case"end":return e.stop()}}),e,null,[[7,28]])})))()}}},S=C,E=g(S,O,q,!1,null,null,null),T=E.exports,R=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"qkb-msg-bubble-component qkb-msg-bubble-component--button-options"},[n("div",{staticClass:"qkb-msg-bubble-component__text"},[t._v(t._s(t.mainData.text)),n("button",{staticClass:"qkb-msg-bubble-play-btn",staticStyle:{"margin-left":"8px",background:"none",border:"none",cursor:"pointer"},attrs:{disabled:t.isPlayingMain},on:{click:t.playAllText}},[t.isPlayingMain?n("span",[t._v("⏸️")]):n("span",[t._v("▶️")])])]),n("div",{staticClass:"qkb-msg-bubble-component__options-wrapper"},t._l(t.mainData.options,(function(e,r){return n("div",{key:r,staticClass:"qkb-mb-button-options__item",class:{active:t.selectedItem===e.value}},["postback"===e.action?n("button",{staticClass:"qkb-mb-button-options__btn",on:{click:function(n){return t.selectOption(e)}}},[n("span",[t._v(t._s(e.text))])]):n("a",{staticClass:"qkb-mb-button-options__btn qkb-mb-button-options__url",attrs:{target:"_blank",href:e.value}},[n("span",[t._v(t._s(e.text))])])])})),0)])},B=[];function L(t){return U(t)||D(t)||A(t)||M()}function M(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function A(t,e){if(t){if("string"===typeof t)return $(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$(t,e):void 0}}function D(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function U(t){if(Array.isArray(t))return $(t)}function $(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function I(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(l){return void n(l)}s.done?e(c):Promise.resolve(c).then(r,o)}function N(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){I(i,r,o,a,s,"next",t)}function s(t){I(i,r,o,a,s,"throw",t)}a(void 0)}))}}var z={props:{mainData:{type:Object}},data:function(){return{selectedItem:null,isPlayingMain:!1,isPlayingOption:null,audio:null}},methods:{selectOption:function(t){this.selectedItem=t,b.$emit("select-button-option",t)},playAllText:function(){var t=this;return N(s.a.mark((function e(){var n,r,o,i;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.isPlayingMain){e.next=4;break}return t.audio&&t.audio.pause(),t.isPlayingMain=!1,e.abrupt("return");case 4:t.isPlayingMain=!0,n=[t.mainData.text].concat(L(t.mainData.options?t.mainData.options.map((function(t){return t.text})):[])),e.prev=6,r=s.a.mark((function e(r){var o,i,a,c,l;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o=n[r],i=o,window._audioCache||(window._audioCache={}),a=void 0,!window._audioCache[i]){e.next=8;break}a=window._audioCache[i],e.next=17;break;case 8:return e.next=10,fetch("https://api-aitext2speech.hayokmedicare.ng/api/text-to-speech/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:o})});case 10:if(c=e.sent,c.ok){e.next=13;break}throw new Error("TTS failed");case 13:return e.next=15,c.blob();case 15:a=e.sent,window._audioCache[i]=a;case 17:return l=URL.createObjectURL(a),t.audio=new Audio(l),e.next=21,new Promise((function(e){t.audio.onended=function(){URL.revokeObjectURL(l),e()},t.audio.onerror=function(){URL.revokeObjectURL(l),e()},t.audio.play()}));case 21:if(t.isPlayingMain){e.next=23;break}return e.abrupt("return","break");case 23:case"end":return e.stop()}}),e)})),o=0;case 9:if(!(o<n.length)){e.next=17;break}return e.delegateYield(r(o),"t0",11);case 11:if(i=e.t0,"break"!==i){e.next=14;break}return e.abrupt("break",17);case 14:o++,e.next=9;break;case 17:e.next=22;break;case 19:e.prev=19,e.t1=e["catch"](6),console.error("Text-to-speech failed",e.t1);case 22:t.isPlayingMain=!1;case 23:case"end":return e.stop()}}),e,null,[[6,19]])})))()}}},V=z,G=g(V,R,B,!1,null,null,null),Y=G.exports,F={components:{SingleText:T,ButtonOptions:Y},props:{message:{type:Object}},computed:{bubbleClass:function(){return"bot"===this.message.agent?"qkb-msg-bubble--bot":"qkb-msg-bubble--user"},componentType:function(){var t="";switch(this.message.type){case"button":t="ButtonOptions";break;default:t="SingleText"}return t}}},H=F,J=g(H,x,_,!1,null,null,null),W=J.exports,X=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},K=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"qkb-msg-bubble qkb-msg-bubble--bot"},[n("div",{staticClass:"qkb-msg-avatar"},[n("div",{staticClass:"qkb-msg-avatar__img"})]),n("div",{staticClass:"qkb-msg-bubble-component qkb-msg-bubble-component--typing"},[n("div",{staticClass:"qkb-msg-bubble-component__text"},[n("div",{staticClass:"qkb-msg-bubble__typing-indicator"},[n("span")])])])])}],Q={},Z=g(Q,X,K,!1,null,null,null),tt=Z.exports,et={components:{MessageBubble:W,MessageTyping:tt},props:{mainData:{type:Array,required:!0},botTyping:{type:Boolean,default:!1}},watch:{mainData:function(t){var e=this;this.$nextTick((function(){e.updateScroll()}))}},methods:{updateScroll:function(){var t=this.$refs.boardContent,e=this.$refs.boardBubbles.offsetHeight;t.scrollTop=e}}},nt=et,rt=g(nt,k,w,!1,null,null,null),ot=rt.exports,it=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"qkb-board-action",class:t.actionClass},[n("div",{staticClass:"qkb-board-action__wrapper"},[n("div",{staticClass:"qkb-board-action__msg-box"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.messageText,expression:"messageText"}],ref:"qkbMessageInput",staticClass:"qkb-board-action__input",attrs:{type:"text",disabled:t.inputDisable,placeholder:t.inputPlaceholder},domProps:{value:t.messageText},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.sendMessage(e)},input:function(e){e.target.composing||(t.messageText=e.target.value)}}}),t.inputDisablePlaceholder&&t.inputDisable?n("div",{staticClass:"qkb-board-action__disable-text"},[n("span",[t._v(t._s(t.inputDisablePlaceholder))])]):t._e()]),n("div",{staticClass:"qkb-board-action__extra"},[t._t("actions"),t.showMicButton?n("button",{staticClass:"qkb-action-item qkb-action-item--mic",attrs:{disabled:t.inputDisable},on:{click:t.toggleRecording}},[t.isRecording?n("MicOn",{staticClass:"qkb-action-icon qkb-action-icon--mic"}):n("MicOff",{staticClass:"qkb-action-icon qkb-action-icon--mic"})],1):t._e(),n("button",{staticClass:"qkb-action-item qkb-action-item--send",on:{click:t.sendMessage}},[t._t("sendButton",[n("IconSend",{staticClass:"qkb-action-icon qkb-action-icon--send"})])],2)],2)])])},at=[];function st(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ct(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?st(Object(n),!0).forEach((function(e){lt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):st(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function lt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ut(t,e){if(null==t)return{};var n,r,o=bt(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function bt(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}var pt={functional:!0,render:function(t,e){var n=e._c,r=(e._v,e.data),o=e.children,i=void 0===o?[]:o,a=r["class"],s=r.staticClass,c=r.style,l=r.staticStyle,u=r.attrs,b=void 0===u?{}:u,p=ut(r,["class","staticClass","style","staticStyle","attrs"]);return n("svg",ct({class:[a,s],style:[c,l],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 488.721 488.721"},b)},p),i.concat([n("path",{attrs:{d:"M483.589 222.024a51.197 51.197 0 00-23.762-23.762L73.522 11.331C48.074-.998 17.451 9.638 5.122 35.086A51.2 51.2 0 003.669 76.44l67.174 167.902L3.669 412.261c-10.463 26.341 2.409 56.177 28.75 66.639a51.314 51.314 0 0018.712 3.624c7.754 0 15.408-1.75 22.391-5.12l386.304-186.982c25.45-12.326 36.089-42.949 23.763-68.398zM58.657 446.633c-8.484 4.107-18.691.559-22.798-7.925a17.065 17.065 0 01-.481-13.784l65.399-163.516h340.668L58.657 446.633zm42.121-219.358L35.379 63.759a16.64 16.64 0 014.215-18.773 16.537 16.537 0 0119.063-2.884l382.788 185.173H100.778z"}})]))}};function dt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ft(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?dt(Object(n),!0).forEach((function(e){ht(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ht(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mt(t,e){if(null==t)return{};var n,r,o=gt(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function gt(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}var yt={functional:!0,render:function(t,e){var n=e._c,r=(e._v,e.data),o=e.children,i=void 0===o?[]:o,a=r["class"],s=r.staticClass,c=r.style,l=r.staticStyle,u=r.attrs,b=void 0===u?{}:u,p=mt(r,["class","staticClass","style","staticStyle","attrs"]);return n("svg",ft({class:[a,s],style:[c,l],attrs:Object.assign({width:"32",height:"32",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},b)},p),i.concat([n("circle",{attrs:{cx:"8",cy:"5",r:"6",fill:"#007bff","fill-opacity":".45"}},[n("animate",{attrs:{attributeName:"r",values:"6;11;6",dur:"0.8s",repeatCount:"indefinite"}}),n("animate",{attrs:{attributeName:"opacity",values:"0.45;0.10;0.45",dur:"0.8s",repeatCount:"indefinite"}})]),n("path",{attrs:{d:"M5 3a3 3 0 016 0v4a3 3 0 01-6 0V3z",fill:"#007bff"}}),n("path",{attrs:{d:"M9 13.93V16H7v-2.07A7.001 7.001 0 011 7V6h2v1a5 5 0 0010 0V6h2v1a7.001 7.001 0 01-6 6.93z",fill:"#0056b3"}})]))}};function vt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function kt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?vt(Object(n),!0).forEach((function(e){wt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function wt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xt(t,e){if(null==t)return{};var n,r,o=_t(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function _t(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}var Ot={functional:!0,render:function(t,e){var n=e._c,r=(e._v,e.data),o=e.children,i=void 0===o?[]:o,a=r["class"],s=r.staticClass,c=r.style,l=r.staticStyle,u=r.attrs,b=void 0===u?{}:u,p=xt(r,["class","staticClass","style","staticStyle","attrs"]);return n("svg",kt({class:[a,s],style:[c,l],attrs:Object.assign({width:"800",height:"800",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},b)},p),i.concat([n("path",{attrs:{d:"M16 16h-3l-2.125-2.616A6.947 6.947 0 019 13.93V16H7v-2.07A7.001 7.001 0 011 7V6h2v1a5 5 0 006.55 4.755L8.124 9.998 8 10a3 3 0 01-3-3v-.846L0 0h3l13 16zM11 6.154L6.384.472A3 3 0 0111 3v3.154zM12.808 8.379l1.443 1.776C14.73 9.207 15 8.135 15 7V6h-2v1c0 .478-.067.94-.192 1.379z",fill:"#000"}})]))}};function qt(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(l){return void n(l)}s.done?e(c):Promise.resolve(c).then(r,o)}function jt(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){qt(i,r,o,a,s,"next",t)}function s(t){qt(i,r,o,a,s,"throw",t)}a(void 0)}))}}var Pt={components:{IconSend:pt,MicOn:yt,MicOff:Ot},props:{inputPlaceholder:{type:String},inputDisablePlaceholder:{type:String},inputDisable:{type:Boolean,default:!1},showMicButton:{type:Boolean,default:!0}},data:function(){return{messageText:null,isRecording:!1,mediaRecorder:null,audioChunks:[],stream:null,recognition:null}},computed:{actionClass:function(){var t=[];return this.inputDisable&&t.push("qkb-board-action--disabled"),this.messageText&&t.push("qkb-board-aciton--typing"),t}},mounted:function(){this.$refs.qkbMessageInput.focus()},methods:{sendMessage:function(){this.messageText&&(this.$emit("msg-send",{text:this.messageText}),this.messageText=null)},toggleRecording:function(){var t=this;return jt(s.a.mark((function e(){return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.isRecording?(t.stopRecording(),t.$emit("mic-state",!1)):(t.startRecording(),t.$emit("mic-state",!0));case 1:case"end":return e.stop()}}),e)})))()},startRecording:function(){var t=this;return jt(s.a.mark((function e(){var n;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=window.SpeechRecognition||window.webkitSpeechRecognition,!n){e.next=12;break}return t.recognition=new n,t.recognition.continuous=!0,t.recognition.interimResults=!1,t.recognition.lang="en-US",t.recognition.onresult=function(e){for(var n=e.resultIndex;n<e.results.length;++n)if(e.results[n].isFinal){var r=e.results[n][0].transcript.trim();r&&(t.messageText=r,t.sendMessage())}},t.recognition.onerror=function(t){console.error("SpeechRecognition error",t)},t.recognition.onend=function(){if(t.isRecording)try{t.recognition.start()}catch(e){"InvalidStateError"!==e.name&&console.error("SpeechRecognition restart error occurred",e)}},t.isRecording=!0,t.recognition.start(),e.abrupt("return");case 12:if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){e.next=15;break}return console.error("Microphone not supported"),e.abrupt("return");case 15:return e.prev=15,e.next=18,navigator.mediaDevices.getUserMedia({audio:!0});case 18:t.stream=e.sent,t.isRecording=!0,t.listenLoop(),e.next=26;break;case 23:e.prev=23,e.t0=e["catch"](15),console.error("Could not access microphone",e.t0);case 26:case"end":return e.stop()}}),e,null,[[15,23]])})))()},stopRecording:function(){if(this.isRecording=!1,this.$emit("mic-state",!1),this.recognition){this.recognition.onresult=null,this.recognition.onerror=null,this.recognition.onend=null;try{this.recognition.stop()}catch(t){console.error("SpeechRecognition stop error occurred",t)}this.recognition=null}if(this.mediaRecorder){this.mediaRecorder.onstop=null,this.mediaRecorder.ondataavailable=null;try{"inactive"!==this.mediaRecorder.state&&this.mediaRecorder.stop()}catch(t){console.error("MediaRecorder stop error occurred",t)}this.mediaRecorder=null}if(this.stream){try{this.stream.getTracks().forEach((function(t){return t.stop()}))}catch(t){console.error("Stream stop error occurred",t)}this.stream=null}},listenLoop:function(){var t=this;return jt(s.a.mark((function e(){return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.isRecording&&t.stream){e.next=2;break}return e.abrupt("return");case 2:t.audioChunks=[],t.mediaRecorder=new window.MediaRecorder(t.stream),t.mediaRecorder.ondataavailable=function(e){e.data.size>0&&t.audioChunks.push(e.data)},t.mediaRecorder.onstop=jt(s.a.mark((function e(){var n,r,o,i;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.isRecording){e.next=2;break}return e.abrupt("return");case 2:if(n=new Blob(t.audioChunks,{type:"audio/webm"}),!(n.size<1e3||n.size>614400)){e.next=6;break}return t.isRecording&&setTimeout((function(){return t.listenLoop()}),200),e.abrupt("return");case 6:return r=new FormData,r.append("audio",n,"recording.webm"),e.prev=8,e.next=11,fetch("https://api-aitext2speech.hayokmedicare.ng/api/speech-to-text/",{method:"POST",body:r});case 11:return o=e.sent,e.next=14,o.json();case 14:i=e.sent,i&&i.text&&(t.messageText=i.text,t.sendMessage()),e.next=21;break;case 18:e.prev=18,e.t0=e["catch"](8),console.error("Speech-to-text error occurred",e.t0);case 21:t.isRecording&&setTimeout((function(){return t.listenLoop()}),200);case 22:case"end":return e.stop()}}),e,null,[[8,18]])}))),t.mediaRecorder.onerror=function(t){console.error("MediaRecorder error occurred",t)},t.mediaRecorder.start(),setTimeout((function(){t.mediaRecorder&&"recording"===t.mediaRecorder.state&&t.mediaRecorder.stop()}),4e3);case 9:case"end":return e.stop()}}),e)})))()}},watch:{inputDisable:function(t){t&&this.isRecording&&this.stopRecording()}}},Ct=Pt,St=g(Ct,it,at,!1,null,null,null),Et=St.exports,Tt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"qkb-bot-style",staticStyle:{display:"none"},domProps:{innerHTML:t._s(t.style)}})},Rt=[],Bt={props:["options"],computed:{style:function(){if(!this.options)return"";var t=this.options,e=t.colorScheme,n=t.textColor,r=t.boardContentBg,o=t.bubbleBtnSize,i=t.botAvatarImg,a=t.botAvatarSize,s=t.inputDisableBg,c=t.msgBubbleBgBot,l=t.msgBubbleColorBot,u=t.msgBubbleBgUser,b=t.msgBubbleColorUser,p='\n<style type="text/css" id="qkb-bot-style">\n.qkb-bubble-btn {\n  background-color: '.concat(e,";\n  width: ").concat(o,"px;\n  height: ").concat(o,"px;\n}\n.qkb-bubble-btn-icon {\n  fill: ").concat(n,";\n  color: ").concat(n,";\n}\n.qkb-board {\n  bottom: ").concat(o,"px;\n}\n.qkb-board-header {\n  background-color: ").concat(e,";\n}\n.qkb-board-header__title {\n  color: ").concat(n,";\n}\n.qkb-board-content {\n  background-color: ").concat(r,";\n}\n").concat(i?".qkb-msg-avatar {\n      width: ".concat(a,"px;\n      height: ").concat(a,"px;\n    }\n    .qkb-msg-avatar__img {\n      background-image: url(").concat(i,");\n    }"):"","\n.qkb-msg-bubble--bot .qkb-msg-bubble-component__text {\n  color: ").concat(l,";\n  background-color: ").concat(c,";\n}\n.qkb-msg-bubble__typing-indicator span,\n.qkb-msg-bubble__typing-indicator::before,\n.qkb-msg-bubble__typing-indicator::after {\n  background-color: ").concat(l,";\n}\n.qkb-mb-button-options__btn::before {\n  background-color: ").concat(u,";\n}\n.qkb-msg-bubble--user .qkb-msg-bubble-component__text {\n  color: ").concat(b,";\n  background-color: ").concat(u,";\n}\n.qkb-mb-button-options__btn {\n  color: ").concat(u,";\n  border-color: ").concat(u,";\n}\n.qkb-mb-button-options__btn:hover {\n  color: ").concat(b,";\n  background-color: ").concat(u,";\n}\n.qkb-board-action--disabled::before {\n  background-color: ").concat(s,";\n}\n</style>\n      ");return p}}},Lt=Bt,Mt=g(Lt,Tt,Rt,!1,null,null,null),At=Mt.exports;function Dt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ut(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Dt(Object(n),!0).forEach((function(e){$t(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Dt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function $t(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function It(t,e){if(null==t)return{};var n,r,o=Nt(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function Nt(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}var zt={functional:!0,render:function(t,e){var n=e._c,r=(e._v,e.data),o=e.children,i=void 0===o?[]:o,a=r["class"],s=r.staticClass,c=r.style,l=r.staticStyle,u=r.attrs,b=void 0===u?{}:u,p=It(r,["class","staticClass","style","staticStyle","attrs"]);return n("svg",Ut({class:[a,s],style:[c,l],attrs:Object.assign({height:"511pt",viewBox:"1 -31 512 511",width:"511pt",xmlns:"http://www.w3.org/2000/svg"},b)},p),i.concat([n("path",{attrs:{d:"M128 448.5c-8.836 0-16-7.164-16-16v-80H48c-26.512 0-48-21.492-48-48v-256C0 21.988 21.488.5 48 .5h416c26.512 0 48 21.488 48 48v256c0 26.508-21.488 48-48 48H230.625l-91.313 91.313c-3 3-7.07 4.687-11.312 4.687zm-80-416c-8.836 0-16 7.164-16 16v256c0 8.836 7.164 16 16 16h80c8.836 0 16 7.164 16 16v57.375l68.688-68.688c3-3 7.07-4.687 11.312-4.687h240c8.836 0 16-7.164 16-16v-256c0-8.836-7.164-16-16-16zm0 0"}}),n("path",{attrs:{d:"M160 144.5c-17.672 0-32-14.328-32-32s14.328-32 32-32 32 14.328 32 32-14.328 32-32 32zm0 0M352 144.5c-17.672 0-32-14.328-32-32s14.328-32 32-32 32 14.328 32 32-14.328 32-32 32zm0 0M256 288.5c-52.996-.05-95.945-43.004-96-96 0-8.836 7.164-16 16-16s16 7.164 16 16c0 35.348 28.652 64 64 64s64-28.652 64-64c0-8.836 7.164-16 16-16s16 7.164 16 16c-.055 52.996-43.004 95.945-96 96zm0 0"}})]))}};function Vt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Gt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Vt(Object(n),!0).forEach((function(e){Yt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Vt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Yt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ft(t,e){if(null==t)return{};var n,r,o=Ht(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function Ht(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}var Jt={functional:!0,render:function(t,e){var n=e._c,r=(e._v,e.data),o=e.children,i=void 0===o?[]:o,a=r["class"],s=r.staticClass,c=r.style,l=r.staticStyle,u=r.attrs,b=void 0===u?{}:u,p=Ft(r,["class","staticClass","style","staticStyle","attrs"]);return n("svg",Gt({class:[a,s],style:[c,l],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512.001 512.001"},b)},p),i.concat([n("path",{attrs:{d:"M284.286 256.002L506.143 34.144c7.811-7.811 7.811-20.475 0-28.285-7.811-7.81-20.475-7.811-28.285 0L256 227.717 34.143 5.859c-7.811-7.811-20.475-7.811-28.285 0-7.81 7.811-7.811 20.475 0 28.285l221.857 221.857L5.858 477.859c-7.811 7.811-7.811 20.475 0 28.285a19.938 19.938 0 0014.143 5.857 19.94 19.94 0 0014.143-5.857L256 284.287l221.857 221.857c3.905 3.905 9.024 5.857 14.143 5.857s10.237-1.952 14.143-5.857c7.811-7.811 7.811-20.475 0-28.285L284.286 256.002z"}})]))}};function Wt(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(l){return void n(l)}s.done?e(c):Promise.resolve(c).then(r,o)}function Xt(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){Wt(i,r,o,a,s,"next",t)}function s(t){Wt(i,r,o,a,s,"throw",t)}a(void 0)}))}}function Kt(t){return ee(t)||te(t)||Zt(t)||Qt()}function Qt(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Zt(t,e){if(t){if("string"===typeof t)return ne(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ne(t,e):void 0}}function te(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function ee(t){if(Array.isArray(t))return ne(t)}function ne(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function re(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function oe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?re(Object(n),!0).forEach((function(e){ie(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):re(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ie(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ae={name:"VueBotUI",components:{BoardHeader:v,BoardContent:ot,BoardAction:Et,BubbleIcon:zt,CloseIcon:Jt,AppStyle:At},props:{options:{type:Object,default:function(){return{}}},messages:{type:Array},botTyping:{type:Boolean,default:!1},inputDisable:{type:Boolean,default:!1},isOpen:{type:Boolean,default:!1},openDelay:{type:Number}},data:function(){return{botActive:!1,defaultOptions:{botTitle:"Chatbot",colorScheme:"#1b53d0",textColor:"#fff",bubbleBtnSize:56,animation:!0,boardContentBg:"#fff",botAvatarSize:32,botAvatarImg:"http://placehold.it/200x200",msgBubbleBgBot:"#f0f0f0",msgBubbleColorBot:"#000",msgBubbleBgUser:"#4356e0",msgBubbleColorUser:"#fff",inputPlaceholder:"Message",inputDisableBg:"#fff",inputDisablePlaceholder:null},micOn:!1,isBotAudioPlaying:!1,micWasOnBeforeBotAudio:!1}},watch:{messages:{handler:function(){this.autoPlayBotResponses()},deep:!0}},computed:{optionsMain:function(){return oe({},this.defaultOptions,{},this.options)},uiClasses:function(){var t=[];return this.optionsMain.animation&&t.push("qkb-bot-ui--animate"),t}},created:function(){this.isOpen&&(this.openDelay?setTimeout(this.botOpen,this.openDelay):this.botToggle())},mounted:function(){document.addEventListener(p.EVENT_OPEN,(function(){this.botOpen()})),document.addEventListener(p.EVENT_CLOSE,(function(){this.botClose()})),document.addEventListener(p.EVENT_TOGGLE,(function(){this.botToggle()}))},beforeDestroy:function(){b.$off("select-button-option")},methods:{botOpen:function(){this.botActive||this.botToggle()},botClose:function(){this.botActive&&this.botToggle()},botToggle:function(){this.botActive=!this.botActive,this.botActive?(b.$on("select-button-option",this.selectOption),this.$emit("init")):(b.$off("select-button-option"),this.$emit("destroy"))},sendMessage:function(t){this.$emit("msg-send",t)},selectOption:function(t){this.$emit("msg-send",t)},autoPlayBotResponses:function(){var t=this;if(this.micOn&&!this.isBotAudioPlaying){var e=(this.messages||[]).find((function(t){return"bot"===t.agent&&!t._audioPlayed&&t.text}));if(e){this.micOn&&(this.micWasOnBeforeBotAudio=!0,this.$refs.boardAction&&this.$refs.boardAction.stopRecording&&this.$refs.boardAction.stopRecording(),this.micOn=!1),this.isBotAudioPlaying=!0;var n=[e.text].concat(Kt(e.options?e.options.map((function(t){return t.text})):[])),r=function(){var r=Xt(s.a.mark((function r(){var o,i;return s.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:r.prev=0,o=s.a.mark((function t(e){var r,o,i,a,c,l;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=n[e],o=r,window._audioCache||(window._audioCache={}),i=void 0,!window._audioCache[o]){t.next=8;break}i=window._audioCache[o],t.next=17;break;case 8:return t.next=10,fetch("https://api-aitext2speech.hayokmedicare.ng/api/text-to-speech/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:r})});case 10:if(a=t.sent,a.ok){t.next=13;break}throw new Error("TTS failed");case 13:return t.next=15,a.blob();case 15:i=t.sent,window._audioCache[o]=i;case 17:return c=URL.createObjectURL(i),l=new Audio(c),t.next=21,new Promise((function(t){l.onended=function(){URL.revokeObjectURL(c),t()},l.onerror=function(){URL.revokeObjectURL(c),t()},l.play()}));case 21:case"end":return t.stop()}}),t)})),i=0;case 3:if(!(i<n.length)){r.next=8;break}return r.delegateYield(o(i),"t0",5);case 5:i++,r.next=3;break;case 8:r.next=13;break;case 10:r.prev=10,r.t1=r["catch"](0),console.error("Text-to-speech failed",r.t1);case 13:e._audioPlayed=!0,t.isBotAudioPlaying=!1,setTimeout((function(){t.micWasOnBeforeBotAudio&&(t.micOn=!0,t.micWasOnBeforeBotAudio=!1,t.$refs.boardAction&&t.$refs.boardAction.startRecording&&t.$refs.boardAction.startRecording()),t.autoPlayBotResponses()}),100);case 16:case"end":return r.stop()}}),r,null,[[0,10]])})));return function(){return r.apply(this,arguments)}}();r()}}},handleMicState:function(t){this.micOn=t,t&&(Array.isArray(this.messages)&&this.messages.forEach((function(t){"bot"===t.agent&&(t._audioPlayed=!0)})),this.autoPlayBotResponses())}}},se=ae,ce=(n("de67"),g(se,o,i,!1,null,null,null)),le=ce.exports,ue={install:function(t,e){t.component("VueBotUI",le)}},be=ue;e["default"]=be}})}));